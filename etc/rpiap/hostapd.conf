# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# !!! warning                                                          !!!
# !!! configuration file is before starting hostapd daemon modified    !!!
# !!! This is a Jinja2 template with variables: ssid, psk, channel,    !!!
# !!! mode, country. The rendered result is located in                 !!!
# !!! /var/lib/rpiap/hostapd/hostapd.conf                              !!!
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

# === Basic Access Point Configuration ===

# Bridge
bridge=lan

# Network name (SSID) that clients will see
ssid={{ ssid }}

# Wireless interface to use for the access point
interface=wlan0

# === WPA/WPA2 Security Configuration ===

# Pre-shared key for WPA/WPA2 authentication
wpa_psk={{ psk }}

# Authentication algorithms: 1=WPA, 2=WEP, 3=both
auth_algs=1

# WPA version: 1=WPA1, 2=WPA2, 3=both (WPA2 recommended)
wpa=2

# Key management protocol (Pre-Shared Key)
wpa_key_mgmt=WPA-PSK

# Encryption cipher for WPA2 (CCMP is AES)
rsn_pairwise=CCMP

# === Radio Configuration ===

# Hardware mode: a=5GHz, b=2.4GHz, g=2.4GHz, n=2.4GHz/5GHz
hw_mode={{ mode }}

# WiFi channel number (1-13 for 2.4GHz, 36+ for 5GHz)
channel={{ channel }}

# Channel list for Automatic Channel Selection (when channel=0)
chanlist=36,40,44,48

{% if country %}
# Country code for regulatory compliance (e.g., US, CZ)
country_code={{ country }}

# === Country and Regulations ===

# Advertise country_code and set allowed channels and transmit power level based on regulatory limits
ieee80211d=1

# Enable radar detection and DFS support if available (requires ieee80211d=1)
ieee80211h=1

{% endif %}

# === Higher Throughput ===

# Enable Wi-Fi Multimedia (WMM)
wmm_enabled=1

# Enable Wi-Fi 4 (HT), requires WMM. Works on 2.4 GHz and 5 GHz
ieee80211n=1

# Enable Wi-Fi 5 (VHT), requires WMM. Works on 5 GHz only
ieee80211ac=1

# === Access Control and Visibility ===

# MAC address access control: 0=disabled, 1=accept list, 2=deny list
macaddr_acl=0

# SSID broadcast: 0=visible, 1=hidden, 2=send empty SSID
ignore_broadcast_ssid=0
